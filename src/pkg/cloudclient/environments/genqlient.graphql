fragment EnvFields on Environment {
    organization {
        id
    }
    id
    name
    labels {
        key
        value
    }
    intentsCount
    integrationCount
}

query GetEnvironments {
    environments{
        ...EnvFields
    }
}

# @genqlient(pointer: true)
query GetEnvironmentsByLabels($labels: [LabelInput!]) {
    environments(labels: $labels) {
        ...EnvFields
    }
}

mutation CreateEnv($name: String!, $labels: [LabelInput!]) {
    createEnvironment(name: $name, labels: $labels) {
        ...EnvFields
    }
}

mutation CreateDevEnv {
    me {
        createUserEnvironment {
            ...EnvFields
        }
    }
}

query GetDevEnv {
    me {
        userEnvironment {
            ...EnvFields
        }
    }
}

# @genqlient(pointer: true)
mutation AddEnvLabels($id: ID!, $labels: [LabelInput!]!) {
    addEnvironmentLabels(id: $id, labels: $labels) {
        ...EnvFields
    }
}

# @genqlient(pointer: true)
mutation RemoveEnvLabels($id: ID!, $labels: [String!]!) {
    deleteEnvironmentLabels(id: $id, labels: $labels) {
        ...EnvFields
    }
}

# @genqlient(pointer: true)
mutation UpdateEnvironment($id: ID!, $update: EnvironmentUpdate!) {
    updateEnvironment(id: $id, update: $update) {
        ...EnvFields
    }
}

# @genqlient(pointer: true)
mutation DeleteEnv($id: ID!, $force: Boolean!) {
    deleteEnvironment(id: $id, force: $force)
}

query GetEnvByID($id: ID!) {
    environment(id: $id) {
        ...EnvFields
    }
}

query GetEnvByName($name: String!) {
    oneEnvironment(name: $name) {
        ...EnvFields
    }
}
